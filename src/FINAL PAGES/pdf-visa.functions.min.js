// @ts-nocheck
let loadingStartTime=Date.now(),isContentLoaded=!1,isMinTimeElapsed=!1,apiDataLoaded=!1;const MIN_LOADING_TIME=2e3;let mainlid;function setlid(t){mainlid=t}function initializePageLanguage(t){const e={1:{lang:"fa",dir:"rtl",mainTitle:"ویزا",contractNumber:"شماره قرارداد",issueDate:"تاریخ صدور",contractTime:"ساعت قرارداد",accessDenied:"شما اجازه دسترسی به این صفحه را ندارید",loadingText:"در حال بارگذاری...",pdfLoadingText:"در حال تولید PDF...",textAlign:"text-right",justifyContent:"justify-end"},2:{lang:"en",dir:"ltr",mainTitle:"Visa",contractNumber:"Contract Number",issueDate:"Issue Date",contractTime:"Contract Time",accessDenied:"You do not have permission to access this page",loadingText:"Loading...",pdfLoadingText:"Generating PDF...",textAlign:"text-left",justifyContent:"justify-start"},3:{lang:"ar",dir:"rtl",mainTitle:"جواز سفر",contractNumber:"رقم العقد",issueDate:"تاريخ الإصدار",contractTime:"وقت العقد",accessDenied:"ليس لديك إذن للوصول إلى هذه الصفحة",loadingText:"جاري التحميل...",pdfLoadingText:"جاري إنشاء PDF...",textAlign:"text-right",justifyContent:"justify-end"}},n=e[t]||e[1];window.currentTranslations=n;const a=document.getElementById("html-root"),i=document.body,s=document.getElementById("main-content-wrapper"),o=document.getElementById("header-section"),d=document.getElementById("access-denied-message"),l=document.getElementById("pdf-loading-text"),r=document.getElementById("main-loading-text");a&&(a.setAttribute("lang",n.lang),a.setAttribute("dir",n.dir)),i&&(i.setAttribute("dir",n.dir),i.className=i.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`),s&&(s.setAttribute("dir",n.dir),s.className=s.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`),o&&(o.setAttribute("dir",n.dir),o.className=o.className.replace(/(justify-start|justify-end)/g,"")+` ${n.justifyContent}`),r&&(r.textContent=n.loadingText),setTimeout((()=>{const t=document.getElementById("main-title");t&&(t.textContent=n.mainTitle,t.className=t.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`);const e=document.getElementById("contract-number-label");e&&(e.innerHTML=`${n.contractNumber}<span>:</span>`,e.className=e.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`);const a=document.getElementById("issue-date-label");a&&(a.innerHTML=`${n.issueDate}<span>:</span>`,a.className=a.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`);const i=document.getElementById("contract-time-label");i&&(i.innerHTML=`${n.contractTime}<span>:</span>`,i.className=i.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`),d&&(d.textContent=n.accessDenied,d.setAttribute("dir",n.dir),d.className=d.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`);const s=document.getElementById("loading-text");s&&(s.textContent=n.pdfLoadingText),l&&(l.setAttribute("dir",n.dir),l.className=l.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`)}),100)}function initializeLoadingSystem(){setTimeout((()=>{isMinTimeElapsed=!0,checkLoadingComplete()}),2e3),checkImagesLoaded(),checkFontsLoaded(),checkContentLoaded()}function checkImagesLoaded(){const t=document.querySelectorAll("img");let e=0;const n=t.length;return 0===n?Promise.resolve():new Promise((a=>{t.forEach((t=>{t.complete?e++:t.onload=t.onerror=()=>{e++,e===n&&a()}})),e===n&&a()}))}function checkFontsLoaded(){return document.fonts&&document.fonts.ready?document.fonts.ready:new Promise((t=>setTimeout(t,500)))}function checkContentLoaded(){const t=setInterval((()=>{const e=document.querySelector('[datamembername="db.visa_pdf"]'),n=document.querySelector("h1");e&&n&&(apiDataLoaded=!0,clearInterval(t),checkAllResourcesLoaded())}),100);setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,clearInterval(t),checkAllResourcesLoaded())}),1e4)}async function checkAllResourcesLoaded(){try{await Promise.all([checkImagesLoaded(),checkFontsLoaded()]),initializePageLanguage(mainlid),initializeLoadingSystem(),isContentLoaded=!0,checkLoadingComplete()}catch(t){console.warn("خطا در لود resources:",t),isContentLoaded=!0,checkLoadingComplete()}}function checkLoadingComplete(){isMinTimeElapsed&&isContentLoaded&&apiDataLoaded&&hideLoadingScreen()}function hideLoadingScreen(){const t=document.getElementById("main-loading-screen"),e=document.getElementById("main-content-wrapper");t&&e&&(t.classList.add("hidden"),setTimeout((()=>{e.classList.add("loaded"),t.style.display="none"}),500))}async function RenderInfoCardVisa(t,e){let n=t;console.log(t,n.visainfo);const a={1:{error:"داده‌های هتل نامعتبر است.",dir:"rtl",textAlign:"text-right"},2:{error:"Invalid hotel data provided.",dir:"ltr",textAlign:"text-left"},3:{error:"بيانات الفندق غير صالحة.",dir:"rtl",textAlign:"text-right"}},i=a[e]||a[1];if(!n||!n.visainfo)return console.error("Invalid hotel data:",n),`<div class="text-red-500 ${i.textAlign}" dir="${i.dir}">${i.error}</div>`;const s=n.visainfo;return`<h1 class="text-lg font-danademibold text-center" dir="${i.dir}">${s.visaname}</h1>\n        <div class="flex text-sm" dir="${i.dir}">\n            <span class="text-sm font-danademibold ${i.textAlign}">${s.visacountry}</span>\n        </div>`}async function renderRulesVisa(t,e){const n=t?.note,a={1:{noItems:"هیچ آیتمی در pdf_description پیدا نشد",invalidText:"آیتم {index} متن معتبری ندارد",dir:"rtl",textAlign:"text-right"},2:{noItems:"No items found in pdf_description",invalidText:"Item {index} does not have valid text",dir:"ltr",textAlign:"text-left"},3:{noItems:"لم يتم العثور على أي عناصر في pdf_description",invalidText:"العنصر {index} لا يحتوي على نص صالح",dir:"rtl",textAlign:"text-right"}},i=a[e]||a[1];if(!n||!Array.isArray(n))return console.warn(i.noItems),null;let s=detectDirection(n)||i.dir,o="";return n.forEach(((t,e)=>{const n=t.trim();n?o+=`<li>${n}</li>`:console.warn(i.invalidText.replace("{index}",e),t)})),`<ul dir="${s}" class="${i.textAlign}">${fixRTLTextCompletely(o)}</ul>`}async function renderVisaInfo(t,e){let n=t?.product_info;const a={1:{title:"اطلاعات ویزا",visaName:"نام ویزا <br/> Visa Name",country:"کشور <br/> Country",application:"کاربرد ویزا <br/> Application",visaType:"نوع ویزا <br/> Visa Type",visitLog:"دفعات ورود <br/> Visit Log",validity:"مدت اعتبار <br/> Validity Duration",documents:"مدارک مورد نیاز <br/> Documents",date:"تاریخ <br/> Date",dir:"rtl",textAlign:"text-right",marginside:"mr-4"},2:{title:"Visa Information",visaName:"Visa Name",country:"Country",application:"Application",visaType:"Visa Type",visitLog:"Visit Log",validity:"Validity Duration",documents:"Documents",date:"Date",dir:"ltr",textAlign:"text-left",marginside:"ml-4"},3:{title:"معلومات التأشيرة",visaName:"اسم التأشيرة",country:"البلد",application:"تطبيق التأشيرة",visaType:"نوع التأشيرة",visitLog:"سجل الزيارة",validity:"مدة الصلاحية",documents:"الوثائق المطلوبة",date:"التاريخ",dir:"rtl",textAlign:"text-right",marginside:"mr-4"}},i=a[e]||a[1],s=n?.documents?.length?`<ul class="list-disc pr-4 ${i.textAlign}">${n.documents.map((t=>`<li class="text-[#292929] text-sm font-danademibold">${t.name1||"–"}</li>`)).join("")}</ul>`:"–";return console.log(n),`\n        <h2 class="font-bold text-lg my-2 font-danabold ${i.textAlign}" dir="${i.dir}">${i.title}</h2>\n        <div class="bg-[#F4FBF9] rounded-xl p-4 ">\n        <div class="flex justify-between gap-4 " dir="${i.dir}">\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.visaName}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign}">\n                    ${n.visaname||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.country}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign}">\n                    ${n.visacountry||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.application}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign}">\n                    ${n.application||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.visaType}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign}">\n                    ${n.visatype||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.visitLog}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign}">\n                    ${n.visit_log||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.validity}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign}">\n                    ${n.validity_duration?`${n.validity_duration.time} ${n.validity_duration.months}`:"–"}\n                </div>\n            </div>\n            </div>\n            <div class=" flex justify-start gap-4 mt-4" dir="${i.dir}">\n            <div class="gap-y-2 flex flex-col ">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.documents}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${i.textAlign} ${i.marginside}">\n                    ${s}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${i.textAlign}">${i.date}</span>\n                <div class="text-[#292929] text-sm font-danademibold dir-${i.dir} ${i.textAlign}">\n                    <span>${n.dateinfo?.mstring||"–"}</span>\n                    ${1===e?`<span>(${n.dateinfo?.sstring||"–"})</span>`:""}\n                </div>\n            </div>\n        </div>\n        </div>\n    `}async function renderVisaPassengerInfo(t,e){const n={1:{title:"اطلاعات مسافران",row:"ردیف <br/> NO",passengers:"نام / نام خانوادگی <br/> SURNAME / NAME",fathername:"نام پدر <br/> Father Name",gender:"جنسیت <br/> SEX",birthdate:"تاریخ تولد <br/> Birthdate",nationality:"ملیت <br/> Nationality",countryOfBirth:"کشور محل تولد <br/> Country of Birth",countryOfPassportIssue:"کشور صدور پاسپورت <br/> Country of Passport Issue",age:"سن <br/> Age",male:"مرد",female:"زن",dir:"rtl",textAlign:"text-right",centerText:"text-center"},2:{title:"Passenger Information",row:"Row",passengers:"Surname / Name",fathername:"Father Name",gender:"Sex",birthdate:"Birthdate",nationality:"Nationality",countryOfBirth:"Country of Birth",countryOfPassportIssue:"Country of Passport Issue",age:"Age",male:"Male",female:"Female",dir:"ltr",textAlign:"text-left",centerText:"text-center"},3:{title:"معلومات المسافرين",row:"الصف",passengers:"الاسم / اللقب",fathername:"اسم الأب",gender:"الجنس",birthdate:"تاريخ الميلاد",nationality:"الجنسية",countryOfBirth:"بلد الميلاد",countryOfPassportIssue:"بلد إصدار جواز السفر",age:"العمر",male:"ذكر",female:"أنثى",dir:"rtl",textAlign:"text-right",centerText:"text-center"}},a=n[e]||n[1],i=(t?.passengerinfo||[]).map((t=>{const e=t.visa_passenger;return{name:`${e.fullname.firstname?.trim()||""} ${e.fullname.lastname?.trim()||""}`,fathername:e.fathername||"–",gender:e.gender||"–",birthdate:e.birthdate?.birthdate1||"–",nationality:e.countryofresidence?.countryname||"–",countryOfBirth:e.Countryofbirth?.countryname||"–",countryOfPassportIssue:e.countryofpassportissue?.countryname||"–",age:e.type||"–"}}));console.log(i);const s=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.name}</h2>`)).join(""),o=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.fathername}</h2>`)).join(""),d=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${"1"==t.gender?a.male:a.female}</h2>`)).join(""),l=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.birthdate}</h2>`)).join(""),r=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.nationality}</h2>`)).join(""),c=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.countryOfBirth}</h2>`)).join(""),x=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.countryOfPassportIssue}</h2>`)).join(""),m=i.map((t=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t.age}</h2>`)).join(""),g=i.map(((t,e)=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${e+1}</h2>`)).join("");return`\n        <h2 class="font-bold text-lg my-2 font-danabold ${a.textAlign}" dir="${a.dir}">${a.title}</h2>\n        <div class="bg-[#F4FBF9] rounded-xl p-4 flex justify-between gap-2" dir="${a.dir}">\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.row}</span>\n                ${g}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.passengers}</span>\n                ${s}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.fathername}</span>\n                ${o}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.gender}</span>\n                ${d}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.birthdate}</span>\n                ${l}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.nationality}</span>\n                ${r}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.countryOfBirth}</span>\n                ${c}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.countryOfPassportIssue}</span>\n                ${x}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-xs font-danaregular text-nowrap ${a.centerText}">${a.age}</span>\n                ${m}\n            </div>\n        </div>\n    `}setTimeout((()=>{isContentLoaded||(console.warn("Loading timeout - forcing content display"),isContentLoaded=!0,isMinTimeElapsed=!0,apiDataLoaded=!0,checkLoadingComplete())}),15e3),window.onBasisApiComplete=function(){console.log("Basis API completed"),apiDataLoaded=!0,checkAllResourcesLoaded()},window.addEventListener("load",(function(){setTimeout((()=>{apiDataLoaded||(console.log("Window load event triggered"),apiDataLoaded=!0,checkAllResourcesLoaded())}),500)}));