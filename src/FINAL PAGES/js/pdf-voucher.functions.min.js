// @ts-nocheck
let loadingStartTime=Date.now(),isContentLoaded=!1,isMinTimeElapsed=!1,apiDataLoaded=!1;const MIN_LOADING_TIME=2e3;let mainlid;function setlid(e){mainlid=e}function initializePageLanguage(e){const t={1:{lang:"fa",dir:"rtl",mainTitle:"ووچر",contractNumber:"شماره قرارداد",issueDate:"تاریخ صدور",contractTime:"ساعت قرارداد",accessDenied:"شما اجازه دسترسی به این صفحه را ندارید",loadingText:"در حال بارگذاری...",pdfLoadingText:"در حال تولید PDF...",textAlign:"text-right",justifyContent:"!justify-end"},2:{lang:"en",dir:"ltr",mainTitle:"Voucher",contractNumber:"Contract Number",issueDate:"Issue Date",contractTime:"Contract Time",accessDenied:"You do not have permission to access this page",loadingText:"Loading...",pdfLoadingText:"Generating PDF...",textAlign:"text-left",justifyContent:"!justify-start"},3:{lang:"ar",dir:"rtl",mainTitle:"قسيمة",contractNumber:"رقم العقد",issueDate:"تاريخ الإصدار",contractTime:"وقت العقد",accessDenied:"ليس لديك إذن للوصول إلى هذه الصفحة",loadingText:"جاري التحميل...",pdfLoadingText:"جاري إنشاء PDF...",textAlign:"text-right",justifyContent:"!justify-end"}},n=t[e]||t[1];window.currentTranslations=n;const a=document.getElementById("html-root"),s=document.body,l=document.getElementById("main-content-wrapper"),i=document.getElementById("header-section"),r=document.getElementById("access-denied-message"),d=document.getElementById("pdf-loading-text"),o=document.getElementById("main-loading-text");a&&(a.setAttribute("lang",n.lang),a.setAttribute("dir",n.dir)),s&&(s.setAttribute("dir",n.dir),s.className=s.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`),l&&(l.setAttribute("dir",n.dir),l.className=l.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`),i&&(i.setAttribute("dir",n.dir),i.className=i.className.replace(/(!justify-start|!justify-end)/g,"")+` ${n.justifyContent}`),o&&(o.textContent=n.loadingText),setTimeout((()=>{const e=document.getElementById("main-title");e&&(e.textContent=n.mainTitle,e.className=e.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`);const t=document.getElementById("contract-number-label");t&&(t.innerHTML=`${n.contractNumber}<span>:</span>`,t.className=t.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`);const a=document.getElementById("issue-date-label");a&&(a.innerHTML=`${n.issueDate}<span>:</span>`,a.className=a.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`);const s=document.getElementById("contract-time-label");s&&(s.innerHTML=`${n.contractTime}<span>:</span>`,s.className=s.className.replace(/(text-left|text-right)/g,"")+` ${n.textAlign}`),r&&(r.textContent=n.accessDenied,r.setAttribute("dir",n.dir),r.className=r.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`);const l=document.getElementById("loading-text");l&&(l.textContent=n.pdfLoadingText),d&&(d.setAttribute("dir",n.dir),d.className=d.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`)}),100)}function initializeLoadingSystem(){setTimeout((()=>{isMinTimeElapsed=!0,checkLoadingComplete()}),2e3),checkImagesLoaded(),checkFontsLoaded(),checkContentLoaded()}function checkImagesLoaded(){const e=document.querySelectorAll("img");let t=0;const n=e.length;return 0===n?Promise.resolve():new Promise((a=>{e.forEach((e=>{e.complete?t++:e.onload=e.onerror=()=>{t++,t===n&&a()}})),t===n&&a()}))}function checkFontsLoaded(){return document.fonts&&document.fonts.ready?document.fonts.ready:new Promise((e=>setTimeout(e,500)))}function checkContentLoaded(){const e=setInterval((()=>{const t=document.querySelector('[datamembername="db.voucher_pdf"]'),n=document.querySelector("h1");t&&n&&(apiDataLoaded=!0,clearInterval(e),checkAllResourcesLoaded())}),100);setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,clearInterval(e),checkAllResourcesLoaded())}),1e4)}async function checkAllResourcesLoaded(){try{await Promise.all([checkImagesLoaded(),checkFontsLoaded()]),initializePageLanguage(mainlid),initializeLoadingSystem(),isContentLoaded=!0,checkLoadingComplete()}catch(e){console.warn("خطا در لود resources:",e),isContentLoaded=!0,checkLoadingComplete()}}function checkLoadingComplete(){isMinTimeElapsed&&isContentLoaded&&apiDataLoaded&&hideLoadingScreen()}function hideLoadingScreen(){const e=document.getElementById("main-loading-screen"),t=document.getElementById("main-content-wrapper");e&&t&&(e.classList.add("hidden"),setTimeout((()=>{t.classList.add("loaded"),e.style.display="none"}),500))}async function RenderInfoCard(e,t=1){let n=e;if(!n||!n.hotelinfo)return console.error("Invalid hotel data:",n),'<div class="text-red-500">Invalid hotel data provided.</div>';const a=n.hotelinfo,s=extractFilenameFromUrl(a.hotelimage),l=n.checkin?.mstring?formatDateToReadable(n.checkin.mstring):"",i=n.checkout?.mstring?formatDateToReadable(n.checkout.mstring):"",r=n.nights||0,d=n.rooms?.length||0,o={1:{checkInLabel:"زمان ورورد",checkOutLabel:"زمان خروج",nightLabel:"تعداد شب ها",roomLabel:"تعداد اتاق ها",starLabel:"ستاره",borderClass:"border-r-2 border-[#E3E3E3] pr-3",cityDisplay:a.country,countryCityDisplay:a.city,direction:"dir-rtl",textAlign:"text-right",checkinDisplay:`${l} (${n.checkin?.sstring})`,checkoutDisplay:`${i} (${n.checkout?.sstring})`,textWrap:"text-nowrap"},2:{checkInLabel:"Check in",checkOutLabel:"Check out",nightLabel:"Night",roomLabel:"Room",starLabel:"star",borderClass:"border-l-2 border-[#E3E3E3] pl-3",cityDisplay:a.ecountry,countryCityDisplay:a.ecity,direction:"",textAlign:"",checkinDisplay:l,checkoutDisplay:i,textWrap:""},3:{checkInLabel:"وقت الوصول",checkOutLabel:"وقت المغادرة",nightLabel:"عدد الليالي",roomLabel:"عدد الغرف",starLabel:"النجم",borderClass:"border-r-2 border-[#E3E3E3] pr-3",cityDisplay:a.country,countryCityDisplay:a.city,direction:"dir-rtl",textAlign:"text-right",checkinDisplay:l,checkoutDisplay:i,textWrap:"text-nowrap"}},c=o[t]||o[1];return`\n    <div class="w-3/5 ">\n    <div class="flex leading-5 gap-x-3">\n        <figure class="w-[80px] h-[80px] rounded-[5px] overflow-hidden" >\n            <img  class="hotelimage w-[80px] h-[80px] object-cover " width="80" height="80" src="/${s}"\n                alt="${a.hotelname}" />\n        </figure>\n        <div class="flex flex-col gap-y-1">\n            <h2 class="text-lg font-danademibold">\n                ${a.hotelname}\n            </h2>\n            <div class="flex items-center">\n                ${RenderRateHotel(a.star)}\n                <span class="text-sm ml-2 font-danaregular">${a.star} <span class="${2===t?"ml-1":"mr-1"}">${c.starLabel}</span> </span>\n            </div>\n            <div class="text-base font-danaregular ${c.direction}">\n                <span>\n                ${c.cityDisplay}\n                </span>\n                <span class="mx-1"> / </span>\n                 <span>\n                 ${c.countryCityDisplay}\n                 </span>\n                 </div>\n        </div>\n    </div>\n    \n    <div class="mt-3">\n                        \n    </div>\n    </div>\n    <div class="w-2/5 ${c.borderClass}">\n    <ul class="flex flex-col gap-y-2">\n        <li>\n            <h2 class="text-base font-danademibold">${c.checkInLabel}</h2>\n            <div class="flex items-center w-full gap-x-2 text-sm text-[#242424] ${c.textWrap}">\n                <svg id="calendar-icon-pdf" class="scale-110 origin-center min-w-3" xmlns="http://www.w3.org/2000/svg"  width="12" height="12" viewBox="0 0 12 12" fill="none">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.17319 6.2289C7.96769 6.2289 7.80119 6.0624 7.80119 5.8569C7.80119 5.6519 7.96769 5.4854 8.17319 5.4854C8.37869 5.4854 8.54519 5.6519 8.54519 5.8569C8.54519 6.0624 8.37869 6.2289 8.17319 6.2289ZM8.17319 8.1029C7.96769 8.1029 7.80119 7.9364 7.80119 7.7309C7.80119 7.5254 7.96769 7.3589 8.17319 7.3589C8.37869 7.3589 8.54519 7.5254 8.54519 7.7309C8.54519 7.9364 8.37869 8.1029 8.17319 8.1029ZM5.99969 6.2289C5.79469 6.2289 5.62819 6.0624 5.62819 5.8569C5.62819 5.6519 5.79469 5.4854 5.99969 5.4854C6.20519 5.4854 6.37169 5.6519 6.37169 5.8569C6.37169 6.0624 6.20519 6.2289 5.99969 6.2289ZM5.99969 8.1029C5.79469 8.1029 5.62819 7.9364 5.62819 7.7309C5.62819 7.5254 5.79469 7.3589 5.99969 7.3589C6.20519 7.3589 6.37169 7.5254 6.37169 7.7309C6.37169 7.9364 6.20519 8.1029 5.99969 8.1029ZM3.8267 6.2289C3.6212 6.2289 3.4547 6.0624 3.4547 5.8569C3.4547 5.6519 3.6212 5.4854 3.8267 5.4854C4.0322 5.4854 4.1987 5.6519 4.1987 5.8569C4.1987 6.0624 4.0322 6.2289 3.8267 6.2289ZM3.8267 8.1029C3.6212 8.1029 3.4547 7.9364 3.4547 7.7309C3.4547 7.5254 3.6212 7.3589 3.8267 7.3589C4.0322 7.3589 4.1987 7.5254 4.1987 7.7309C4.1987 7.9364 4.0322 8.1029 3.8267 8.1029ZM10.0947 2.6649C9.69269 2.2619 9.11969 2.0349 8.43769 1.9779V1.4414C8.43769 1.2114 8.25069 1.0249 8.02069 1.0249C7.79069 1.0249 7.60419 1.2114 7.60419 1.4414V3.4139C7.56769 3.4239 7.53219 3.4364 7.49269 3.4364C7.26219 3.4364 7.07569 3.2494 7.07569 3.0194V2.0534C7.07569 1.99818 7.03094 1.9534 6.97569 1.9534H4.3957V1.4414C4.3957 1.2114 4.2092 1.0249 3.9792 1.0249C3.7487 1.0249 3.5622 1.2114 3.5622 1.4414V3.4139C3.5262 3.4239 3.4902 3.4364 3.4507 3.4364C3.2207 3.4364 3.0337 3.2494 3.0337 3.0194V2.19141C3.0337 2.12638 2.97244 2.07862 2.91008 2.0971C1.84121 2.41381 1.2207 3.27685 1.2207 4.5534V8.3329C1.2207 9.9879 2.2167 10.9754 3.8847 10.9754H8.11519C9.78319 10.9754 10.7792 10.0019 10.7792 8.3709V4.5544C10.7812 3.7694 10.5447 3.1164 10.0947 2.6649Z" fill="#242424"/>\n</svg>\n                <span class="font-danaregular ${2===t?"":"dir-ltr"}">\n                ${c.checkinDisplay}\n                </span>\n            </div>\n        </li>\n        <li>\n            <h2 class="text-base font-danademibold">${c.checkOutLabel}</h2>\n            <div class="flex items-center w-full gap-x-2 text-sm text-[#242424] ${c.textWrap}">\n                <svg id="calendar-icon-pdf" class="scale-110 origin-center min-w-3" xmlns="http://www.w3.org/2000/svg"  width="12" height="12" viewBox="0 0 12 12" fill="none">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.17319 6.2289C7.96769 6.2289 7.80119 6.0624 7.80119 5.8569C7.80119 5.6519 7.96769 5.4854 8.17319 5.4854C8.37869 5.4854 8.54519 5.6519 8.54519 5.8569C8.54519 6.0624 8.37869 6.2289 8.17319 6.2289ZM8.17319 8.1029C7.96769 8.1029 7.80119 7.9364 7.80119 7.7309C7.80119 7.5254 7.96769 7.3589 8.17319 7.3589C8.37869 7.3589 8.54519 7.5254 8.54519 7.7309C8.54519 7.9364 8.37869 8.1029 8.17319 8.1029ZM5.99969 6.2289C5.79469 6.2289 5.62819 6.0624 5.62819 5.8569C5.62819 5.6519 5.79469 5.4854 5.99969 5.4854C6.20519 5.4854 6.37169 5.6519 6.37169 5.8569C6.37169 6.0624 6.20519 6.2289 5.99969 6.2289ZM5.99969 8.1029C5.79469 8.1029 5.62819 7.9364 5.62819 7.7309C5.62819 7.5254 5.79469 7.3589 5.99969 7.3589C6.20519 7.3589 6.37169 7.5254 6.37169 7.7309C6.37169 7.9364 6.20519 8.1029 5.99969 8.1029ZM3.8267 6.2289C3.6212 6.2289 3.4547 6.0624 3.4547 5.8569C3.4547 5.6519 3.6212 5.4854 3.8267 5.4854C4.0322 5.4854 4.1987 5.6519 4.1987 5.8569C4.1987 6.0624 4.0322 6.2289 3.8267 6.2289ZM3.8267 8.1029C3.6212 8.1029 3.4547 7.9364 3.4547 7.7309C3.4547 7.5254 3.6212 7.3589 3.8267 7.3589C4.0322 7.3589 4.1987 7.5254 4.1987 7.7309C4.1987 7.9364 4.0322 8.1029 3.8267 8.1029ZM10.0947 2.6649C9.69269 2.2619 9.11969 2.0349 8.43769 1.9779V1.4414C8.43769 1.2114 8.25069 1.0249 8.02069 1.0249C7.79069 1.0249 7.60419 1.2114 7.60419 1.4414V3.4139C7.56769 3.4239 7.53219 3.4364 7.49269 3.4364C7.26219 3.4364 7.07569 3.2494 7.07569 3.0194V2.0534C7.07569 1.99818 7.03094 1.9534 6.97569 1.9534H4.3957V1.4414C4.3957 1.2114 4.2092 1.0249 3.9792 1.0249C3.7487 1.0249 3.5622 1.2114 3.5622 1.4414V3.4139C3.5262 3.4239 3.4902 3.4364 3.4507 3.4364C3.2207 3.4364 3.0337 3.2494 3.0337 3.0194V2.19141C3.0337 2.12638 2.97244 2.07862 2.91008 2.0971C1.84121 2.41381 1.2207 3.27685 1.2207 4.5534V8.3329C1.2207 9.9879 2.2167 10.9754 3.8847 10.9754H8.11519C9.78319 10.9754 10.7792 10.0019 10.7792 8.3709V4.5544C10.7812 3.7694 10.5447 3.1164 10.0947 2.6649Z" fill="#242424"/>\n</svg>\n                <span class="font-danaregular ${2===t?"":"dir-ltr"}">\n                ${c.checkoutDisplay}\n                </span>\n            </div>\n        </li>\n        <li>\n            <h2 class="text-base font-danademibold">${c.nightLabel}</h2>\n            <div class="flex items-center w-full gap-x-2 text-sm text-[#242424] font-danaregular">\n                ${r}\n            </div>\n        </li>\n        <li>\n            <h2 class="text-base font-danademibold">${c.roomLabel}</h2>\n            <div class="flex items-center w-full gap-x-2 text-sm text-[#242424] font-danaregular">\n                ${d}\n            </div>\n        </li>\n    </ul>\n    </div>`}async function renderRules(e,t=1){const n=e?.pdf_description;if(!n||!Array.isArray(n))return console.warn("هیچ آیتمی در pdf_description پیدا نشد"),null;let a=detectDirection(n?.[0]?.note.text),s="";return n.forEach(((e,t)=>{const n=e?.note?.text?.trim();n?s+=`<li>${n}</li>`:console.warn(`آیتم ${t} متن معتبری ندارد`,e)})),1===t||3===t?`<ul dir="${a}" class="text-right">${fixRTLTextCompletely(s)}</ul>`:`<ul dir="${a}">${s}</ul>`}function RenderRateHotel(e){let t="";for(let n=0;n<e;n++)t+='\n                    <svg id="star-icon-pdf" width="14" height="14" viewBox="0 0 14 14" fill="none" >\n<path d="M10.2667 8.62758C10.2323 8.41991 10.3017 8.20816 10.4528 8.06175L12.6344 5.99675C12.8141 5.82816 12.88 5.5715 12.8036 5.33758C12.7225 5.10425 12.5178 4.93508 12.2728 4.90008L9.37359 4.4795C9.16418 4.44741 8.98276 4.315 8.88943 4.12425L7.59501 1.51675C7.49409 1.32075 7.30101 1.1895 7.08168 1.16675H6.83609L6.73693 1.20758L6.67334 1.23091C6.63834 1.25133 6.60684 1.27641 6.57943 1.30675L6.52693 1.34758C6.47968 1.39308 6.44059 1.44675 6.41026 1.50508L5.13276 4.12425C5.03359 4.32258 4.83993 4.45675 4.61943 4.4795L1.72026 4.90008C1.47934 4.938 1.27984 5.10658 1.20168 5.33758C1.12118 5.56916 1.18243 5.82583 1.35859 5.99675L3.46501 8.03841C3.61609 8.18716 3.68551 8.40008 3.65109 8.6095L3.13193 11.4795C3.07534 11.8266 3.30576 12.1556 3.65109 12.2209C3.79284 12.2437 3.93751 12.2209 4.06526 12.1567L6.64943 10.8028C6.69843 10.776 6.75209 10.7585 6.80693 10.7503H6.96501C7.06709 10.7532 7.16684 10.7789 7.25668 10.8267L9.84026 12.1742C10.0578 12.2909 10.3233 12.2734 10.5228 12.1276C10.7263 11.987 10.829 11.7408 10.7853 11.4976L10.2667 8.62758Z" fill="#FFBF1C"/>\n</svg>';return t}async function renderRooms(e,t=1){let n=e?.hotelinfo,a=e?.rooms,s="";const l={1:{room:"اتاق",roomType:"نوع اتاق",services:"خدمات",passengers:"مسافران",passengerType:"نوع مسافر",age:"سن",status:"وضعیت",transfer:"ترنسفر اتاق",passengerName:"نام مسافر",arrivalAirport:"فرودگاه ورود",arrivalFlightNo:"شماره پرواز ورود",departureAirport:"فرودگاه خروج",departureFlightNo:"شماره پرواز خروج",wrapClass:"text-nowrap",centerClass:"text-center"},2:{room:"Room",roomType:"Room type",services:"Board",passengers:"Passenger",passengerType:"Gender",age:"Age",status:"Status",transfer:"Room ${room.index} Transfer",passengerName:"Passenger Name",arrivalAirport:"Arrival Airport",arrivalFlightNo:"Arrival Flight No.",departureAirport:"Departure Airport",departureFlightNo:"Departure Flight No.",wrapClass:"",centerClass:""},3:{room:"الغرفة",roomType:"نوع الغرفة",services:"خدمات",passengers:"الركاب",passengerType:"نوع مسافر",age:"عمر",status:"حالة",transfer:"نقل الغرفة",passengerName:"اسم الراكب",arrivalAirport:"مطار الوصول",arrivalFlightNo:"رقم رحلة الوصول",departureAirport:"مطار المغادرة",departureFlightNo:"رقم رحلة المغادرة",wrapClass:"text-nowrap",centerClass:"text-center"}},i=l[t]||l[1];return a.forEach((e=>{const a=e.passengers.map((e=>{const t=(e.type||"").match(/^([^\(]+)(?:\s*\((.+)\))?/),n=t?.[1]?.trim()||"–",a=t?.[2]?.trim()||e.age||"–";return{name:`${e.fullname.firstname.trim()} ${e.fullname.lastname.trim()}`,type:n,age:a,transfer:e.transfer_data||null}})),l=a.map((e=>`<h2 class="text-[#292929] text-sm font-danademibold ${i.wrapClass}">${e.name}</h2>`)).join(""),r=a.map((e=>`<h2 class="text-[#292929] text-sm font-danademibold ${i.centerClass}">${e.type}</h2>`)).join(""),d=a.map((e=>`<h2 class="text-[#292929] text-sm font-danademibold dir-ltr ${i.centerClass} ${i.wrapClass}">${e.age}</h2>`)).join("");s+=`\n        <h2 class="font-bold text-lg my-2 font-danabold">${i.room} ${e.index}</h2>\n        <div class="bg-[#F4FBF9] rounded-xl p-4 flex justify-between gap-4 ${2===t?"flex-wrap":""}">\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular ${i.wrapClass}">${i.roomType}</span>\n                <div class="text-[#292929] text-sm font-danademibold self-center flex justify-center items-center h-[calc(100%-20px)]">${e.roomtype.trim()}</div>\n            </div>\n\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${i.services}</span>\n                <div class="text-[#292929] text-sm font-danademibold self-center flex justify-center items-center h-[calc(100%-20px)]">\n                    ${escapeXML(n.services)}\n                </div>\n            </div>\n\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${i.passengers}</span>\n                ${l}\n            </div>\n\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular ${i.wrapClass} ${i.centerClass}">${i.passengerType}</span>\n                ${r}\n            </div>\n\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular ${i.centerClass}">${i.age}</span>\n                ${d}\n            </div>\n\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${i.status}</span>\n                <div class="text-[#292929] text-sm font-danademibold self-center flex justify-center items-center h-[calc(100%-20px)]">\n                    ${"1"===e.onrequest?"On Request":"Available"}\n                </div>\n            </div>\n        </div>\n        `;const o=a.filter((e=>e.transfer));o.length>0&&(s+=`\n            <div class="bg-[#F4FBF9] rounded-xl p-4 mt-3 flex flex-col gap-2" ${3===t?'dir="rtl"':""}>\n                <h3 class="font-danabold text-base text-[#292929] mb-1">${i.transfer} ${e.index}</h3>\n                ${o.map((e=>`\n                    <div class="flex justify-between flex-wrap gap-4 border border-dashed border-[#DADADA] p-3 rounded-lg">\n                        <div class="flex flex-col w-1/5">\n                            <span class="text-[#6D6D6D] text-sm font-danaregular">${i.passengerName}</span>\n                            <div class="text-[#292929] text-sm font-danademibold">${e.name}</div>\n                        </div>\n                        <div class="flex flex-col">\n                            <span class="text-[#6D6D6D] text-sm font-danaregular">${i.arrivalAirport}</span>\n                            <div class="text-[#292929] text-sm font-danademibold">${e.transfer?.airport_arrival||"–"}</div>\n                        </div>\n                        <div class="flex flex-col">\n                            <span class="text-[#6D6D6D] text-sm font-danaregular">${i.arrivalFlightNo}</span>\n                            <div class="text-[#292929] text-sm font-danademibold">${e.transfer?.arrival_flight_number||"–"}</div>\n                        </div>\n                        <div class="flex flex-col">\n                            <span class="text-[#6D6D6D] text-sm font-danaregular">${i.departureAirport}</span>\n                            <div class="text-[#292929] text-sm font-danademibold">${e.transfer?.airport_departure||"–"}</div>\n                        </div>\n                        <div class="flex flex-col">\n                            <span class="text-[#6D6D6D] text-sm font-danaregular">${i.departureFlightNo}</span>\n                            <div class="text-[#292929] text-sm font-danademibold">${e.transfer?.departure_flight_number||"–"}</div>\n                        </div>\n                    </div>\n                `)).join("")}\n            </div>\n            `)})),s}function renderFlightInfo(e,t=1){if(!e||0===Object.keys(e).length)return"";const n={1:{departureFlight:"پرواز رفت",returnFlight:"پرواز برگشت",airline:"ایرلاین",flightNumber:"شماره پرواز",date:"تاریخ",departureTime:"ساعت حرکت",arrivalTime:"ساعت رسیدن",direction:""},2:{departureFlight:"Departure Flight",returnFlight:"Return Flight",airline:"Airline",flightNumber:"Flight Number",date:"Date",departureTime:"Departure Time",arrivalTime:"Arrival Time",direction:""},3:{departureFlight:"رحلة الذهاب",returnFlight:"رحلة الإياب",airline:"شركة الطيران",flightNumber:"رقم الرحلة",date:"التاريخ",departureTime:"وقت المغادرة",arrivalTime:"وقت الوصول",direction:'dir="rtl"'}},a=n[t]||n[1],s=(e,t)=>`\n        <h2 class="font-bold text-lg my-2 font-danabold">${e}</h2>\n        <div class="bg-[#F4FBF9] rounded-xl p-4 flex justify-between gap-4 flex-wrap" ${a.direction}>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${a.airline}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${t.airlines}</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${a.flightNumber}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${t.flightno}</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${a.date}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${t.date.sstring} (${t.date.mstring})</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${a.departureTime}</span>\n                <div class="text-[#292929] text-sm font-danademibold dir-ltr">${t.etime}</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${a.arrivalTime}</span>\n                <div class="text-[#292929] text-sm font-danademibold dir-ltr">${t.atime}</div>\n            </div>\n        </div>\n    `;return`\n        ${s(a.departureFlight,e.enterflight)}\n        ${s(a.returnFlight,e.exitflight)}\n    `}function renderBrokerInfo(e,t=1){if(!e?.brokerinfo)return"";const n=e.brokerinfo,a=e.support?.person?.[0]?.info||{},s={1:{broker:"کارگزار",brokerName:"نام کارگزار",country:"کشور",managerName:"نام مدیر",phone:"تلفن",email:"ایمیل",website:"وب‌سایت",support:"پشتیبان",name:"نام",direction:""},2:{broker:"Broker",brokerName:"Broker Name",country:"Country",managerName:"Manager Name",phone:"Phone",email:"Email",website:"Website",support:"Support",name:"Name",direction:""},3:{broker:"الوسيط",brokerName:"اسم الوسيط",country:"الدولة",managerName:"اسم المدير",phone:"الهاتف",email:"البريد الإلكتروني",website:"الموقع الإلكتروني",support:"الدعم",name:"الاسم",direction:'dir="rtl"'}},l=s[t]||s[1];return`\n        <h2 class="font-bold text-lg my-2 font-danabold">${l.broker}</h2>\n        <div class="bg-[#F4FBF9] rounded-xl p-4 flex justify-between gap-4 flex-wrap" ${l.direction}>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${l.brokerName}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${n.broker_name}</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${l.country}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${(n.country||[]).map((e=>e.countryname)).join(", ")}</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${l.managerName}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${n.manager_name||"–"}</div>\n            </div>\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${l.phone}</span>\n                <div class="text-[#292929] text-sm font-danademibold">${(n.phone||[]).map((e=>e.number)).join(", ")}</div>\n            </div>\n            ${n.email?`\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${l.email}</span>\n                <div class="text-[#292929] text-sm font-danademibold dir-ltr">${n.email}</div>\n            </div>`:""}\n            ${n.website?`\n            <div class="flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular">${l.website}</span>\n                <div class="text-[#292929] text-sm font-danademibold dir-ltr">${n.website}</div>\n            </div>`:""}\n        </div>\n\n        ${a.name||a.tel?`\n        <div class="bg-[#F4FBF9] rounded-xl p-4 mt-3 flex flex-col gap-2">\n            <h3 class="font-danabold text-base text-[#292929] mb-1">${l.support}</h3>\n            <div class="flex flex-wrap gap-4 border border-dashed border-[#DADADA] p-3 rounded-lg">\n                <div class="flex flex-col">\n                    <span class="text-[#6D6D6D] text-sm font-danaregular">${l.name}</span>\n                    <div class="text-[#292929] text-sm font-danademibold">${a.name||"–"}</div>\n                </div>\n                <div class="flex flex-col">\n                    <span class="text-[#6D6D6D] text-sm font-danaregular">${l.phone}</span>\n                    <div class="text-[#292929] text-sm font-danademibold dir-ltr">${a.tel||"–"}</div>\n                </div>\n            </div>\n        </div>`:""}\n    `}setTimeout((()=>{isContentLoaded||(console.warn("Loading timeout - forcing content display"),isContentLoaded=!0,isMinTimeElapsed=!0,apiDataLoaded=!0,checkLoadingComplete())}),15e3),window.onBasisApiComplete=function(){apiDataLoaded=!0,checkAllResourcesLoaded()},window.addEventListener("load",(function(){setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,checkAllResourcesLoaded())}),500)}));