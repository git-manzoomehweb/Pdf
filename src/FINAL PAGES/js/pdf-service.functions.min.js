// @ts-nocheck
let loadingStartTime=Date.now(),isContentLoaded=!1,isMinTimeElapsed=!1,apiDataLoaded=!1;const MIN_LOADING_TIME=2e3;let mainlid,translations;function setlid(e){mainlid=e}function initializePageLanguage(e){translations={1:{lang:"fa",dir:"rtl",mainTitle:"خدمات",contractNumber:"شماره قرارداد",issueDate:"تاریخ صدور",contractTime:"ساعت قرارداد",accessDenied:"شما اجازه دسترسی به این صفحه را ندارید",loadingText:"در حال بارگذاری",pdfLoadingText:"در حال تولید PDF",textAlign:"text-right",justifyContent:"!justify-end",reject:'<p style="text-align:center">متاسفانه سرویس شما تایید نشد</p>\n                <p style="text-align:center">Unfortunately, your Service was not approved</p>\n                <p style="text-align:center">جهت هماهنگی و پاسخگویی به سوالات خود را با واحد پشتیبانی تماس حاصل نمایید</p>\n               <p style="text-align:center">Contact the support unit to coordinate and answer your questions</p>',onrequest:'<p style="text-align:center">واچر شما منتظر تایید واحد رزرواسیون است</p>\n                <p style="text-align:center">Your voucher is waiting for the approval of the reservation</p>\n                <p style="text-align:center">جهت هماهنگی و پاسخگویی به سوالات خود با واحد پشتیبانی تماس حاصل نمایید.</p>\n               <p style="text-align:center">Contact the support unit to coordinate and answer your questions</p>'},2:{lang:"en",dir:"ltr",mainTitle:"Service",contractNumber:"Contract Number",issueDate:"Issue Date",contractTime:"Contract Time",accessDenied:"You do not have permission to access this page",loadingText:"Loading",pdfLoadingText:"Generating PDF",textAlign:"text-left",justifyContent:"!justify-start",reject:'\n                <p style="text-align:center">Unfortunately, your Service was not approved</p>\n               <p style="text-align:center">Contact the support unit to coordinate and answer your questions</p>',onrequest:'<p style="text-align:center">Your voucher is waiting for the approval of the reservation</p>\n               <p style="text-align:center">Contact the support unit to coordinate and answer your questions</p>'},3:{lang:"ar",dir:"rtl",mainTitle:"الخدمة",contractNumber:"رقم العقد",issueDate:"تاريخ الإصدار",contractTime:"وقت العقد",accessDenied:"ليس لديك إذن للوصول إلى هذه الصفحة",loadingText:"جاري التحميل",pdfLoadingText:"جاري إنشاء PDF",textAlign:"text-right",justifyContent:"!justify-end",reject:'\n  <p style="text-align:center">للأسف، لم يتم اعتماد خدمتك</p>\n  <p style="text-align:center">يرجى التواصل مع وحدة الدعم للتنسيق والإجابة على استفساراتك</p>',onrequest:'\n  <p style="text-align:center">قسيمتك بانتظار موافقة الحجز</p>\n  <p style="text-align:center">يرجى التواصل مع وحدة الدعم للتنسيق والإجابة على استفساراتك</p>'}};const t=translations[e]||translations[1];window.currentTranslations=t;document.getElementById("html-root"),document.body;const n=document.getElementById("main-content-wrapper"),a=document.getElementById("header-section"),r=document.getElementById("access-denied-message"),i=document.getElementById("pdf-loading-text"),s=document.getElementById("main-loading-text");n&&(n.setAttribute("dir",t.dir),n.className=n.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${t.dir}`),a&&(a.setAttribute("dir",t.dir),a.className=a.className.replace(/(!justify-start|!justify-end)/g,"")+` ${t.justifyContent}`),s&&(s.textContent=t.loadingText),setTimeout((()=>{const e=document.getElementById("main-title");e&&(e.textContent=t.mainTitle,e.className=e.className.replace(/(text-left|text-right)/g,"")+` ${t.textAlign}`);const n=document.getElementById("contract-number-label");n&&(n.innerHTML=`${t.contractNumber}`,n.className=n.className.replace(/(text-left|text-right)/g,"")+` ${t.textAlign}`);const a=document.getElementById("issue-date-label");a&&(a.innerHTML=`${t.issueDate}`,a.className=a.className.replace(/(text-left|text-right)/g,"")+` ${t.textAlign}`);const s=document.getElementById("contract-time-label");s&&(s.innerHTML=`${t.contractTime}`,s.className=s.className.replace(/(text-left|text-right)/g,"")+` ${t.textAlign}`),r&&(r.textContent=t.accessDenied,r.setAttribute("dir",t.dir),r.className=r.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${t.dir}`);const o=document.getElementById("loading-text");o&&(o.textContent=t.pdfLoadingText),i&&(i.setAttribute("dir",t.dir),i.className=i.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${t.dir}`)}),2e3)}function initializeLoadingSystem(){setTimeout((()=>{isMinTimeElapsed=!0,checkLoadingComplete()}),2e3),checkImagesLoaded(),checkFontsLoaded(),checkContentLoaded()}function nodata_error(e,t){if(e)try{console.log("nodata_error() inputs:",{status:t,message:e});const n=document.getElementById("main-content");n&&"function"==typeof n.remove&&n.remove();const a=(null==t?"":String(t)).trim().toLowerCase(),r={onrequest:translations[mainlid].onrequest??"در حال استعلام / On request","on request":translations[mainlid].onrequest??"در حال استعلام / On request",on_request:translations[mainlid].onrequest??"در حال استعلام / On request",reject:translations[mainlid].reject??"رد شده / Rejected",rejected:translations[mainlid].reject??"رد شده / Rejected"}[a];return r?`\n          <div class="bg-red-300 border-2 border-red-500 rounded-xl py-4 px-8 max-sm:px-3 font-danaregular max-w-7xl !text-center w-fit mx-auto my-auto h-fit">\n            ${r}\n          </div>`:null!=e&&String(e).trim().length>0?`\n          <div class="bg-red-300 border-2 border-red-500 rounded-xl py-4 px-8 max-sm:px-3 font-danaregular max-w-7xl !text-center w-fit mx-auto my-auto h-fit">\n            ${String(e)}\n          </div>`:""}catch(e){return console.error("nodata_error() failed:",e),""}}function checkImagesLoaded(){const e=document.querySelectorAll("img");let t=0;const n=e.length;return 0===n?Promise.resolve():new Promise((a=>{e.forEach((e=>{e.complete?t++:e.onload=e.onerror=()=>{t++,t===n&&a()}})),t===n&&a()}))}function checkFontsLoaded(){return document.fonts&&document.fonts.ready?document.fonts.ready:new Promise((e=>setTimeout(e,500)))}function checkContentLoaded(){const e=setInterval((()=>{const t=document.querySelector('[datamembername="db.visa_pdf"]'),n=document.querySelector("h1");t&&n&&(apiDataLoaded=!0,clearInterval(e),checkAllResourcesLoaded())}),100);setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,clearInterval(e),checkAllResourcesLoaded())}),1e4)}async function checkAllResourcesLoaded(){try{await Promise.all([checkImagesLoaded(),checkFontsLoaded()]),initializePageLanguage(mainlid),initializeLoadingSystem(),isContentLoaded=!0,checkLoadingComplete()}catch(e){console.warn("خطا در لود resources:",e),isContentLoaded=!0,checkLoadingComplete()}}function checkLoadingComplete(){isMinTimeElapsed&&isContentLoaded&&apiDataLoaded&&hideLoadingScreen()}function hideLoadingScreen(){const e=document.getElementById("main-loading-screen"),t=document.getElementById("main-content-wrapper");e&&t&&(e.classList.add("hidden"),setTimeout((()=>{t.classList.add("loaded"),e.style.display="none"}),500))}async function RenderInfoCardService(e,t){let n=e;const a={1:{error:"داده‌های سرویس نامعتبر است.",dir:"rtl",textAlign:"text-right"},2:{error:"Invalid service data provided.",dir:"ltr",textAlign:"text-left"},3:{error:"بيانات الخدمة غير صالحة.",dir:"rtl",textAlign:"text-right"}},r=a[t]||a[1];if(!n||!n.serviceinfo)return console.error("Invalid service data:",n),`<div class="text-red-500 ${r.textAlign}" dir="${r.dir}">${r.error}</div>`;const i=n.serviceinfo;return`<h1 class="text-lg font-danademibold text-center" dir="${r.dir}">${i.servicegroupname}</h1>\n        <div class="flex text-sm justify-center" dir="${r.dir}">\n            <span class="text-sm font-danademibold ${r.textAlign}">${i.servicename}</span>\n        </div>`}async function RenderServiceCardBox(e,t){let n=e?.product_info;const a={1:{title:"اطلاعات خدمات",serviceName:"نام خدمات <br/> Service Name",city:"شهر <br/> City",date:"تاریخ <br/> Date",dir:"rtl",textAlign:"text-right",centerText:"text-center"},2:{title:"Service Information",serviceName:"Service Name",city:"City",date:"Date",dir:"ltr",textAlign:"text-left",centerText:"text-center"},3:{title:"معلومات الخدمة",serviceName:"اسم الخدمة",city:"المدينة",date:"التاريخ",dir:"rtl",textAlign:"text-right",centerText:"text-center"}},r=a[t]||a[1];return`\n        <h2 class="font-bold text-lg my-2 font-danabold ${r.textAlign}" dir="${r.dir}">${r.title}</h2>\n        <div class="bg-[#F4F4F4] rounded-xl p-4 flex justify-between gap-4 max-sm:flex-col max-sm:flex-wrap max-sm:justify-center" dir="${r.dir}">\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${r.centerText}">${r.serviceName}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${r.centerText}">\n                    ${n.servicename||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${r.centerText}">${r.city}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${r.centerText}">\n                    ${n.city||"–"}\n                </div>\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${r.centerText}">${r.date}</span>\n                <div class="text-[#292929] text-sm font-danademibold ${r.centerText} dir-${r.dir}">\n                    <span>${n.dateinfo?.mstring||n.validate?.fdate}</span>\n                    ${1===t?`<span>(${n.dateinfo?.sstring||"–"})</span>`:""}\n                </div>\n            </div>\n        </div>\n    `}async function RenderServicePassengers(e,t){const n={1:{title:"اطلاعات مسافران",row:"ردیف <br/> NO",passengers:"نام / نام خانوادگی <br/> SURNAME / NAME",passengerType:"نوع مسافر <br/> Type",gender:"جنسیت <br/> Gender",adult:"بزرگسال",child:"کودک",male:"مرد",female:"زن",dir:"rtl",textAlign:"text-right",centerText:"text-center"},2:{title:"Passenger Information",row:"Row",passengers:"Surname / Name",passengerType:"Type",gender:"Gender",adult:"Adult",child:"Child",male:"Male",female:"Female",dir:"ltr",textAlign:"text-left",centerText:"text-center"},3:{title:"معلومات المسافرين",row:"الصف",passengers:"الاسم / اللقب",passengerType:"النوع",gender:"الجنس",adult:"بالغ",child:"طفل",male:"ذكر",female:"أنثى",dir:"rtl",textAlign:"text-right",centerText:"text-center"}},a=n[t]||n[1],r=(e?.passengerinfo||[]).map((e=>{const t=e.service_passenger;return{name:`${t.fullname.firstname?.trim()||""} ${t.fullname.lastname?.trim()||""}`,type:"adult"===t.type?a.adult:a.child,gender:"1"===t.gender?a.male:a.female}})),i=r.map((e=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${e.name}</h2>`)).join(""),s=r.map((e=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${e.type}</h2>`)).join(""),o=r.map((e=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${e.gender}</h2>`)).join(""),l=r.map(((e,t)=>`<h2 class="text-[#292929] text-sm font-danademibold ${a.centerText}">${t+1}</h2>`)).join("");return`\n        <h2 class="font-bold text-lg my-2 font-danabold ${a.textAlign}" dir="${a.dir}">${a.title}</h2>\n        <div class="bg-[#F4F4F4] rounded-xl p-4 flex justify-between gap-4 overflow-x-auto  max-sm:flex-col max-sm:flex-wrap max-sm:justify-center" dir="${a.dir}">\n            <div class="gap-y-2 flex flex-col max-sm:hidden">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${a.centerText}">${a.row}</span>\n                ${l}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${a.centerText}">${a.passengers}</span>\n                ${i}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${a.centerText}">${a.passengerType}</span>\n                ${s}\n            </div>\n            <div class="gap-y-2 flex flex-col">\n                <span class="text-[#6D6D6D] text-sm font-danaregular text-nowrap ${a.centerText}">${a.gender}</span>\n                ${o}\n            </div>\n        </div>\n    `}async function renderServiceRules(e,t){const n=e?.rule?.rule,a={1:{noRulesData:"قوانینی ثبت نشده است.",dir:"rtl",textAlign:"text-right"},2:{noRulesData:"No rules have been registered.",dir:"ltr",textAlign:"text-left"},3:{noRulesData:"لم يتم تسجيل أي قوانين.",dir:"rtl",textAlign:"text-right"}},r=a[t]||a[1];if(!n)return`<div class="text-gray-500" dir="${r.dir}">${r.noRulesData}</div>`;let i=n.split(/\r?\n|\r/).filter((e=>e.trim().length>0)).map((e=>`<li>${fixRTLTextCompletely(e)}</li>`)).join("");return`\n    <ul class="list-none pl-5 max-sm:pl-0  text-sm ${r.textAlign}" dir="${r.dir}">${i}</ul>\n  `}function fixRTLTextCompletely(e){if("string"!=typeof e)return e;return e.split(/(<[^>]+>)/g).map((e=>e.startsWith("<")&&e.endsWith(">")?e.replace(/[\u200E\u200F\u202A-\u202E]/g,""):fixRTLTextFromJSON(e))).join("")}function fixRTLTextFromJSON(e){if("string"!=typeof e)return e;const t=[":","-","(",")","/",".",",","|"];if(/[\u0600-\u06FF]/.test(e)){const n="‫",a="‬";t.some((t=>e.includes(t)))&&(e=n+e+a)}return e}function detectDirection(e){return/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/.test(e)?"rtl":"ltr"}setTimeout((()=>{isContentLoaded||(console.warn("Loading timeout - forcing content display"),isContentLoaded=!0,isMinTimeElapsed=!0,apiDataLoaded=!0,checkLoadingComplete())}),15e3),window.onBasisApiComplete=function(){apiDataLoaded=!0,checkAllResourcesLoaded()},window.addEventListener("load",(function(){setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,checkAllResourcesLoaded())}),500)}));