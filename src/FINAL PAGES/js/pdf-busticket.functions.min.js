// @ts-nocheck
let loadingStartTime=Date.now(),isContentLoaded=!1,isMinTimeElapsed=!1,apiDataLoaded=!1;const MIN_LOADING_TIME=4e3;let mainlid,invoiceType,translations;function detectDirection(e=""){return/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF]/.test(String(e))?"rtl":"ltr"}function setlid(e,t=null){mainlid=Array.isArray(e)?e[0]:e,invoiceType=Array.isArray(t)?t[0]:t,ensureTranslationsReady()}function barDirection(e){return 2==(Array.isArray(e)?e[0]:e)?"dir-ltr":"dir-rtl"}function barArrowRotation(e){return 2==(Array.isArray(e)?e[0]:e)?"rotate-0":"rotate-180"}function formatPrice(e){try{return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch{return e}}function renderUnitCost(e){return{10:"IRR",IRR:"IRR",USD:"USD",EUR:"EUR",AED:"AED"}[String(e)]||String(e||"")}function initializePageLanguage(e,t=null){translations={1:{lang:"fa",dir:"rtl",accessDenied:"شما اجازه دسترسی به این صفحه را ندارید",loadingText:"در حال بارگذاری",pdfLoadingText:"در حال تولید PDF",textAlign:"text-right",justifyContent:"!justify-end",electronTicket:"بلیط الکترونیکی",downloadPdf:"دانلود PDF",hidePrice:"مخفی کردن قیمت",showPrice:"نمایش قیمت",invoiceNumber:"شماره فاکتور",pnrCode:"کد PNR",eticketNumber:"شماره بلیط الکترونیکی",dateOfIssue:"تاریخ صدور",passenger:"مسافر",age:"سن",birthdate:"تاریخ تولد",nationalCode:"کد ملی",priceDetails:"جزئیات قیمت",basePrice:"قیمت پایه",tax:"مالیات",total:"مجموع",extraService:"خدمات اضافی",fareConditions:"شرایط کرایه",connectionTime:"زمان انتظار",travelTime:"مدت سفر",route:"مسیر",departure:"رفت",return:"برگشت",adult:"بزرگسال",child:"کودک",infant:"نوزاد",trainNumber:"شماره قطار",flightNumber:"شماره پرواز",airline:"ایرلاین",aircraft:"هواپیما",flightTime:"زمان پرواز",gate:"گیت",terminal:"ترمینال",seat:"صندلی",cabin:"کابین",baggage:"بار",checkedBag:"چمدان",carryOn:"کیف دستی"},2:{lang:"en",dir:"ltr",accessDenied:"You do not have permission to access this page",loadingText:"Loading",pdfLoadingText:"Generating PDF",textAlign:"text-left",justifyContent:"!justify-start",electronTicket:"Electronic Ticket",downloadPdf:"Download PDF",hidePrice:"Hide Price",showPrice:"Show Price",invoiceNumber:"Invoice Number",pnrCode:"PNR Code",eticketNumber:"ETicket Number",dateOfIssue:"Date Of Issue",passenger:"Passenger",age:"Age",birthdate:"Birthdate",nationalCode:"National Code",priceDetails:"Price Details",basePrice:"Base Price",tax:"Tax",total:"Total",extraService:"Extra Service",fareConditions:"Fare Conditions",connectionTime:"Connection Time",travelTime:"Travel Time",route:"Route",departure:"Departure",return:"Return",adult:"Adult",child:"Child",infant:"Infant",trainNumber:"Train Number",flightNumber:"Flight Number",airline:"Airline",aircraft:"Aircraft",flightTime:"Flight Time",gate:"Gate",terminal:"Terminal",seat:"Seat",cabin:"Cabin",baggage:"Baggage",checkedBag:"Checked Bag",carryOn:"Carry On"},3:{lang:"ar",dir:"rtl",accessDenied:"ليس لديك إذن للوصول إلى هذه الصفحة",loadingText:"جاري التحميل",pdfLoadingText:"جاري إنشاء PDF",textAlign:"text-right",justifyContent:"!justify-end",electronTicket:"التذكرة الإلكترونية",downloadPdf:"تحميل PDF",hidePrice:"إخفاء السعر",showPrice:"إظهار السعر",invoiceNumber:"رقم الفاتورة",pnrCode:"رمز PNR",eticketNumber:"رقم التذكرة الإلكترونية",dateOfIssue:"تاريخ الإصدار",passenger:"المسافر",age:"العمر",birthdate:"تاريخ الميلاد",nationalCode:"الرقم الوطني",priceDetails:"تفاصيل السعر",basePrice:"السعر الأساسي",tax:"الضريبة",total:"المجموع",extraService:"خدمة إضافية",fareConditions:"شروط الأجرة",connectionTime:"وقت الانتظار",travelTime:"وقت السفر",route:"المسار",departure:"المغادرة",return:"العودة",adult:"بالغ",child:"طفل",infant:"رضيع",trainNumber:"رقم القطار",flightNumber:"رقم الرحلة",airline:"شركة الطيران",aircraft:"الطائرة",flightTime:"وقت الرحلة",gate:"البوابة",terminal:"المحطة",seat:"المقعد",cabin:"المقصورة",baggage:"الأمتعة",checkedBag:"الحقيبة المسجلة",carryOn:"الحقيبة اليدوية"}};const n=translations[e]||translations[1];window.currentTranslations=n;const a=document.getElementById("main-content-wrapper"),i=document.getElementById("header-section"),r=document.getElementById("access-denied-message"),o=document.getElementById("pdf-loading-text"),s=document.getElementById("main-loading-text");a&&(a.setAttribute("dir",n.dir),a.className=a.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`),i&&(i.setAttribute("dir",n.dir),i.className=i.className.replace(/(!justify-start|!justify-end)/g,"")+` ${n.justifyContent}`),s&&(s.textContent=n.loadingText),setTimeout((()=>{translatePageElements(n,t),r&&(r.textContent=n.accessDenied,r.setAttribute("dir",n.dir),r.className=r.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`);const e=document.getElementById("loading-text");e&&(e.textContent=n.pdfLoadingText),o&&(o.setAttribute("dir",n.dir),o.className=o.className.replace(/dir-(rtl|ltr)/g,"")+` dir-${n.dir}`)}),4e3)}function translatePageElements(e,t=null){const n=document.querySelector(".font-danabold.text-xl");n&&n.textContent.includes("Electronic Ticket")&&(n.textContent=e.electronTicket);const a=document.querySelector('button[onclick="generatePDF()"]');if(a){const t=a.querySelector("svg")?.nextSibling;t&&"Download PDF"===t.textContent.trim()&&(t.textContent=` ${e.downloadPdf}`)}const i=document.querySelector('button[onclick="togglePrice(this)"] .button-content-text');i&&("Hide Price"===i.textContent.trim()?i.textContent=e.hidePrice:"Show Price"===i.textContent.trim()&&(i.textContent=e.showPrice)),translateHeaderTitles(e),translateTicketTitles(e,t),translatePriceTitles(e);const r=document.querySelector(".baggage_conditions h3");r&&(r.textContent=e.baggage);const o=document.querySelector("h3.fare-condition");o&&o.textContent.includes("Fare Conditions")&&(o.textContent=e.fareConditions)}function translateHeaderTitles(e){document.querySelectorAll(".header__details__container__item__title").forEach((t=>{const n=t.textContent.trim().toLowerCase();"invoice number"===n&&(t.textContent=e.invoiceNumber),"pnr code"===n&&(t.textContent=e.pnrCode),"eticket number"===n&&(t.textContent=e.eticketNumber),"date of issue:"===n&&(t.textContent=e.dateOfIssue+":")}))}function translateTicketTitles(e,t=null){document.querySelectorAll(".ticketContainer__details__head__item__title").forEach((t=>{const n=t.textContent.trim().replace(":","").toLowerCase();n.includes("passenger")&&(t.textContent=e.passenger+":"),"age"===n&&(t.textContent=e.age),n.includes("national code")&&(t.textContent=e.nationalCode+":"),n.includes("seat")&&(t.textContent=e.seat+":")}));document.querySelectorAll(".ticketContainer__details__time:not(#from-to-yellow-bar)").forEach((t=>{const n=t.textContent;(/\bRoute\b/i.test(n)||/\bDeparture\b/i.test(n)||/\bReturn\b/i.test(n))&&(t.innerHTML=t.innerHTML.replace(/Route/g,e.route).replace(/Departure/g,e.departure).replace(/Return/g,e.return))}));document.querySelectorAll(".text-xs.text-gray-500.font-danabold").forEach((t=>{const n=t.textContent.trim();"Connection Time"===n&&(t.textContent=e.connectionTime),"Travel Time"===n&&(t.textContent=e.travelTime)}))}function translatePriceTitles(e){const t=document.querySelector("h3.font-danabold");t&&"Price Details"===t.textContent.trim()&&(t.textContent=e.priceDetails);const n=document.querySelectorAll("h3.font-danabold");n[1]&&"Extra Service"===n[1].textContent.trim()&&(n[1].textContent=e.extraService);document.querySelectorAll(".ticketContainer__info__details__title").forEach((t=>{t.innerHTML=t.innerHTML.replace("Base Price:",e.basePrice+":"),t.innerHTML=t.innerHTML.replace("Tax:",e.tax+":"),t.innerHTML=t.innerHTML.replace("Total:",e.total+":")}))}function togglePrice(e){const t=e.querySelector(".button-content-text"),n=window.currentTranslations||{hidePrice:"Hide Price",showPrice:"Show Price"},a=document.querySelector(".ticketContainer__info__details_PriceBox");if(!t||!a)return;const i=t.textContent.trim();i===n.hidePrice||"Hide Price"===i?(t.textContent=n.showPrice,a.classList.add("hidden")):(t.textContent=n.hidePrice,a.classList.remove("hidden"))}async function passenger_type(e,t){try{const n=async(e=5e3)=>{const t=Date.now();for(;!translations&&Date.now()-t<e;)await new Promise((e=>setTimeout(e,100)));return translations};await n();const a=translations?.[1]?.adult?"مسافر":"Passenger";if(null==e||""===e)return a;const i=Array.isArray(t)?t[0]:t,r=translations?.[i];if(!r)return a;switch(String(e).trim()){case"0":return r.infant||"نوزاد";case"1":return r.child||"کودک";case"2":return r.adult||"بزرگسال";default:return a}}catch{switch(String(e||"").trim()){case"0":return"نوزاد";case"1":return"کودک";case"2":return"بزرگسال";default:return"مسافر"}}}function initializeLoadingSystem(){setTimeout((()=>{isMinTimeElapsed=!0,checkLoadingComplete()}),4e3),checkImagesLoaded(),checkFontsLoaded(),checkContentLoaded()}function checkImagesLoaded(){const e=document.querySelectorAll("img");let t=0;const n=e.length;return 0===n?Promise.resolve():new Promise((a=>{e.forEach((e=>{e.complete?t++:e.onload=e.onerror=()=>{t++,t===n&&a()}})),t===n&&a()}))}function checkFontsLoaded(){return document.fonts&&document.fonts.ready?document.fonts.ready:new Promise((e=>setTimeout(e,500)))}function checkContentLoaded(){const e=setInterval((()=>{const t=document.querySelector('[datamembername="db.ticket_pdf"], [datamembername="db.bus_ticket_pdf"]'),n=document.querySelector("h1"),a=window.$data?.passenger?.passengerinfo?.type;t&&n&&a&&(apiDataLoaded=!0,clearInterval(e),ensureTranslationsReady(),checkAllResourcesLoaded())}),100);setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,clearInterval(e),ensureTranslationsReady(),checkAllResourcesLoaded())}),1e4)}async function checkAllResourcesLoaded(){try{await Promise.all([checkImagesLoaded(),checkFontsLoaded()]),initializePageLanguage(mainlid,invoiceType),initializeLoadingSystem(),isContentLoaded=!0,checkLoadingComplete()}catch{isContentLoaded=!0,checkLoadingComplete()}}function checkLoadingComplete(){isMinTimeElapsed&&isContentLoaded&&apiDataLoaded&&hideLoadingScreen()}function hideLoadingScreen(){const e=document.getElementById("main-loading-screen"),t=document.getElementById("main-content-wrapper"),n=document.getElementById("main-content");e&&t&&(e.classList.add("hidden"),t.classList.add("loaded"),e.style.display="none",setTimeout((()=>{2==(Array.isArray(mainlid)?mainlid[0]:mainlid)?n.classList.add("dir-ltr"):n.classList.add("dir-rtl")}),500))}function nodata_error(e){if(((e||"").length||0)>0){if("no data"===e){const e=document.querySelector(".ticketContainer"),t=document.querySelector(".ticketContainer__info"),n=document.querySelector(".fare_conditions");return e&&e.remove(),t&&t.remove(),n&&n.remove(),'<p class="text-xl text-center">Receiving ticket number , please wait ...</p>'}}return""}async function arrive_date_info(e,t,n){const a=e.length,i=e[a-1].route.routeDate.mstring,r=e[a-1].route.routeDate.sstring,o=e[a-1].route.atime||"";return 8===t?`<span id="landingDate" class=" text-sm">${r}</span> | <span id="landingTime" class=" text-sm">${o}</span>`:`<span id="landingDate" class=" text-sm">${await convertDateFormat(i,r,n)}</span> | <span id="landingTime" class=" text-sm">${o}</span>`}function passenger_gender(e){return"0"===String(e)?"Ms.":"Mr."}async function route_array(e,t){let n=e.route,a="";return a+=`\n    <div class="relative">\n      \x3c!-- From --\x3e\n      <div class="ticketContainer__details__path__item pathItem flex gap-2 relative mt-1 min-h-[70px] max-[794px]:min-h-auto">\n        <div class="ticketContainer__details__path__item__times flex flex-col justify-between items-center w-1/6 max-md:w-3/12">\n          <span class="pathItem__times__start text-nowrap text-sm">${n.etime||"-"}</span>\n        </div>\n        <div class="ticketContainer__details__path__item__path flex flex-col items-center relative border-l-2 border-dashed border-gray-400 w-2.5">\n          <svg class="max-w-none absolute -right-[3px] z-10 -top-[2px]" xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 24 24" fill="#9ca3af"><path d="M4 16v2a2 2 0 0 0 2 2h1v-2h10v2h1a2 2 0 0 0 2-2v-2M4 11h16v4H4v-4Zm0-5a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v5H4V6Zm3 0h10"></path></svg>\n        </div>\n        <div class="ticketContainer__details__path__item__details w-4/6 px-2.5">\n          <h3 class="text-xl font-danamedium max-md:text-lg max-sm:text-base">${n.startstation.startotherinfo.city}</h3>\n          <span class="text-xs text-gray-500 font-danaregular max-sm:text-[10px]">${n.startstation.station}</span>\n          <div class="flex items-center gap-2 text-xs text-gray-500 absolute max-md:static top-16 flex-wrap max-sm:text-[10px] max-sm:gap-1">\n            <span class="flex gap-1 items-center">\n              ${n.busoperatorimage?`<img src="/${n.busoperatorimage}" width="32" height="32" alt="${n.busoperatorid}" />`:""}\n              ${n.busoperatorname}\n            </span>\n            |\n            <span>${n.class||"معمولی"}</span>\n          </div>\n        </div>\n      </div>\n      \x3c!-- To --\x3e\n      <div class="ticketContainer__details__path__item pathItem flex gap-2 relative mt-1 min-h-[70px] max-[794px]:min-h-auto">\n        <div class="ticketContainer__details__path__item__times flex flex-col items-center w-1/6 max-md:w-3/12">\n          <span class="pathItem__times__start text-nowrap text-sm"></span>\n        </div>\n        <div class="ticketContainer__details__path__item__path flex flex-col items-center relative border-l-2 border-dashed border-gray-400 w-2.5">\n          <div class="w-2 h-2 rounded-full bg-gray-400 absolute bottom-0 right-[5px]"></div>\n        </div>\n        <div class="ticketContainer__details__path__item__details w-4/6 px-2.5 pt-8">\n          <h3 class="text-xl font-danamedium max-md:text-lg max-sm:text-base">${n.endstation.endotherinfo.city}</h3>\n          <span class="text-xs text-gray-500 font-danaregular max-sm:text-[10px]">${n.endstation.station}</span>\n        </div>\n      </div>\n    </div>`,a}function pdf_desc_array(e){var t="",n=e;if(n.length>0){for(var a=0;a<n.length;a++)t+=`<div dir="${detectDirection(n[a].note.title)}" >${n[a].note.title}</div><div dir="${detectDirection(n[a].note.text)}">${n[a].note.text}</div><br/>`;return t}}function desc_array(e){var t="",n=e;if(n.length>0){for(var a=0;a<n.length;a++){if(void 0!==n[a].departure){const e=n[a].departure;let i="string"==typeof e?e:JSON.stringify(e);i=i.replace(/^"|"$/g,"").replace(/\\n/g,"<br>").replace(/<font[^>]*>|<\/font>/gi,""),t+=`<div class=" font-danaregular" dir="${detectDirection(i)}" >${i}</div>`}if(void 0!==n[a].return){const e=n[a].return;let i="string"==typeof e?e:JSON.stringify(e);i=i.replace(/^"|"$/g,"").replace(/\\n/g,"<br>").replace(/<font[^>]*>|<\/font>/gi,""),t+=`<div class=" font-danaregular" dir="${detectDirection(i)}" >${i}</div>`}}document.getElementById("desc_array").innerHTML=t}}function convertDateFormat(e,t,n){try{const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=String(e||"").split("-"),r=i[0],o=a[parseInt(i[1])-1]||"",s=`${i[2]} ${o} ${r}`,c=Array.isArray(n)?n[0]:n;if(2==c||3==c)return s;const d=String(t||"").split("-"),l=d[0],u=parseInt(d[1]),m=d[2];return`${m} ${["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"][u-1]||""} ${l} (${s})`}catch{return e||t||""}}function updateAgeElements(){document.querySelectorAll("#cargoWeight").forEach((async e=>{if(""===e.textContent.trim()||"-"===e.textContent.trim())try{const t=window.$data?.passenger?.passengerinfo?.type;if(null!=t){const n=await passenger_type(t,[mainlid]);n&&(e.textContent=n)}}catch(e){}}))}function ensureTranslationsReady(){translations||(translations={1:{adult:"بزرگسال",child:"کودک",infant:"نوزاد"},2:{adult:"Adult",child:"Child",infant:"Infant"},3:{adult:"بالغ",child:"طفل",infant:"رضيع"}})}setTimeout((()=>{isContentLoaded||(isContentLoaded=!0,isMinTimeElapsed=!0,apiDataLoaded=!0,checkLoadingComplete())}),15e3),window.onBasisApiComplete=function(){apiDataLoaded=!0,checkAllResourcesLoaded()},window.addEventListener("load",(function(){setTimeout((()=>{apiDataLoaded||(apiDataLoaded=!0,checkAllResourcesLoaded())}),500)})),window.addEventListener("load",(()=>{setTimeout(updateAgeElements,1e3),setTimeout(updateAgeElements,3e3)}));