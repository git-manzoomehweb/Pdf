<basis core="call" lid="2" file="Client_CheckRkey.inc"></basis>

<!DOCTYPE html>
<html lang="fa" id="html-root">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lounge PDF</title>
    <meta name="robots" content="noindex,nofollow">
    <link rel="stylesheet" href="[##cms.cms.cdn##]/css/pdf-ui.min.css">

    <style>
        /* loading */
            .main-loading-screen{ position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #0432ff 0%, #2840a0 100%); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; transition: opacity .5s ease-out, visibility .5s ease-out} .main-loading-screen.hidden{ opacity: 0; visibility: hidden} .loading-spinner{ width: 60px; height: 60px; border: 3px solid rgba(255, 255, 255, .3); border-top: 3px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px} .loading-dots{ display: flex; gap: 8px; margin-top: 20px} .loading-dot{ width: 8px; height: 8px; background: white; border-radius: 50%; animation: bounce 1.4s ease-in-out infinite both} .loading-dot:nth-child(1){ animation-delay: -.32s} .loading-dot:nth-child(2){ animation-delay: -.16s} .loading-dot:nth-child(3){ animation-delay: 0s} @keyframes spin{ 0%{ transform: rotate(0deg)} 100%{ transform: rotate(360deg)}} @keyframes bounce{ 0%, 80%, 100%{ transform: scale(0)} 40%{ transform: scale(1)}} .loading-text{ color: white; font-size: 18px; font-weight: 500; margin-top: 15px; opacity: .9} .loading-progress{ width: 200px; height: 4px; background: rgba(255, 255, 255, .3); border-radius: 2px; overflow: hidden; margin-top: 20px} .loading-progress-bar{ height: 100%; background: white; border-radius: 2px; width: 0; animation: progress 2s ease-out forwards} @keyframes progress{ 0%{ width: 0} 50%{ width: 60%} 100%{ width: 100%}} .main-content{ opacity: 0; transition: opacity .5s ease-in} .main-content.loaded{ opacity: 1}
        /* loading */
    </style>

</head>

<body class="p-0 m-0 overflow-auto" id="content" onload="setlid([##cms.query.lid|(1)##]);">
   
    <!-- Loading -->
    <div class="main-loading-screen" id="main-loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text" id="main-loading-text"></div>
    </div>

    <!-- Main content -->

    <div class="main-content" id="main-content-wrapper">
        <basis core="group" name="invalid-rkey" if="'[##db.checkrkey.checked##]'<>'true'">
            <div class="bg-red-300 border-2 border-red-500 rounded-xl py-4 px-8 font-danaregular max-w-7xl text-center w-fit mx-auto my-auto absolute top-0 left-0 right-0 bottom-0 h-fit"
                id="access-denied-message">
                شما اجازه دسترسی به این صفحه را ندارید
            </div>
        </basis>
        <basis core="group" name="valid-rkey" if="'[##db.checkrkey.checked##]'='true'">

                                        <div class="w-full max-w-[794px] mx-auto my-4 flex justify-between items-center">
           
                <div class="flex gap-2">
                    <button onclick="generatePDF()" type="button"
                        class="text-gray-900 bg-[#F7BE38] hover:bg-[#F7BE38]/90 focus:ring-4 focus:outline-none focus:ring-[#F7BE38]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#F7BE38]/50 me-2 mb-2">
            
                        <svg class=" h-3 me-2 -ms-1" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M14 22H10C6.22876 22 4.34315 22 3.17157 20.8284C2 19.6569 2 17.7712 2 14V10C2 6.22876 2 4.34315 3.17157 3.17157C4.34315 2 6.23869 2 10.0298 2C10.6358 2 11.1214 2 11.53 2.01666C11.5166 2.09659 11.5095 2.17813 11.5092 2.26057L11.5 5.09497C11.4999 6.19207 11.4998 7.16164 11.6049 7.94316C11.7188 8.79028 11.9803 9.63726 12.6716 10.3285C13.3628 11.0198 14.2098 11.2813 15.0569 11.3952C15.8385 11.5003 16.808 11.5002 17.9051 11.5001L18 11.5001H21.9574C22 12.0344 22 12.6901 22 13.5629V14C22 17.7712 22 19.6569 20.8284 20.8284C19.6569 22 17.7712 22 14 22ZM5.25 14.5C5.25 14.0858 5.58579 13.75 6 13.75H14C14.4142 13.75 14.75 14.0858 14.75 14.5C14.75 14.9142 14.4142 15.25 14 15.25H6C5.58579 15.25 5.25 14.9142 5.25 14.5ZM5.25 18C5.25 17.5858 5.58579 17.25 6 17.25H11.5C11.9142 17.25 12.25 17.5858 12.25 18C12.25 18.4142 11.9142 18.75 11.5 18.75H6C5.58579 18.75 5.25 18.4142 5.25 18Z"
                                fill="#FFF" />
                            <path
                                d="M19.3517 7.61665L15.3929 4.05375C14.2651 3.03868 13.7012 2.53114 13.0092 2.26562L13 5.00011C13 7.35713 13 8.53564 13.7322 9.26787C14.4645 10.0001 15.643 10.0001 18 10.0001H21.5801C21.2175 9.29588 20.5684 8.71164 19.3517 7.61665Z"
                                fill="#FFF" />
                        </svg>
            
                        Download PDF
                    </button>           
            
                </div>
            </div>
            
            <basis core="api" name="api.Webservice" url="https://www.basisfly.com/panel/main/view/[##cms.query.rkey##]"
                method="post"
                body='{ "name": "db", "mid": "20", "member": [{ "type": "list", "name": "q", "request": "lounge_pdf", "id": "[##cms.query.id##]", "lid": "[##cms.query.lid|(2)##]"} ]}'
                content-type="application/json" run="atclient"></basis>
            <header id="pdf-header" class="header h-[80px] w-auto mx-auto "><img
                    class="block h-[80px] w-auto mx-auto object-contain"
                    src="[##cms.cms.cdn##]/images/Header-contract-pdf.jpg" width="794" height="100"
                    alt="Footer-contract-pdf" /></header>
            <main class="pdf-content py-6 w-full max-w-[794px] mx-auto" id="main-content">

            
                <div class="pdf-loading hidden ">
                    <div
                        class="flex justify-center items-center fixed z-[99] w-full h-full top-0 left-0 right-0 bottom-0 bg-black/60 backdrop-blur-xl">
                        <span
                            class="pointer-events-none rounded bg-primary px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-primary-3 transition duration-150 ease-in-out hover:bg-primary-accent-300 hover:shadow-primary-2 focus:bg-primary-accent-300 focus:shadow-primary-2 focus:outline-none focus:ring-0 active:bg-primary-600 active:shadow-primary-2 disabled:opacity-70 dark:shadow-black/30 dark:hover:shadow-dark-strong dark:focus:shadow-dark-strong dark:active:shadow-dark-strong flex justify-center items-center gap-x-2"
                            id="pdf-loading-text">
                            <div class="inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-e-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"
                                role="status"></div>
                            <div class="font-danamedium leading-9" id="loading-text">در حال تولید PDF...</div>
                        </span>
                    </div>
                </div>
                <div class="w-[95%] mx-auto">
                    <section class="w-full flex justify-between items-center" id="header-section">
                        <h2 class="font-danademibold text-base text-black" id="main-title">لانژ</h2>
                        <ul class="flex gap-x-4">
                            <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                                <layout>@child </layout>
                                <face>
                                    <script
                                        type="text/template"><li><div><h2 class="text-sm font-normal text-[#202020] text-right font-danaregular" id="contract-number-label">شماره قرارداد<span>:</span></h2><p class="text-base text-[#292929] text-right font-danademibold">[##cms.query.id##]</p></div></li></script>
                                </face>
                            </basis>


                            <basis core="group" name="persian" if="[##cms.query.lid##] = 1">
                                <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                                    <layout>@child </layout>
                                    <face>
                                        <script
                                            type="text/template"><li><div><h2 class="text-sm font-normal text-[#202020] text-right font-danaregular" id="issue-date-label">تاریخ صدور<span>:</span></h2><p class="text-base text-[#292929] text-right font-danademibold">@cipinfo.createDate.sstring@ (@cipinfo.createDate.mstring@)</p></div></li></script>
                                    </face>
                                </basis>
                            
                            </basis>
                            <basis core="group" name="no-persian" if="[##cms.query.lid##] <> 1">
                                <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                                    <layout>@child </layout>
                                    <face>
                                        <script
                                            type="text/template"><li><div><h2 class="text-sm font-normal text-[#202020] text-right font-danaregular" id="issue-date-label">تاریخ صدور<span>:</span></h2><p class="text-base text-[#292929] text-right font-danademibold">@cipinfo.createDate.mstring@</p></div></li></script>
                                    </face>
                                </basis>
                            </basis>
                             

                            <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                                <layout>@child </layout>
                                <face>
                                    <script
                                        type="text/template"><li><div><h2 class="text-sm font-normal text-[#202020] text-right font-danaregular" id="contract-time-label">ساعت قرارداد<span>:</span></h2><p class="text-base text-[#292929] text-center font-danademibold">@cipinfo.createHour@</p></div></li></script>
                                </face>
                            </basis>
                        </ul>
                    </section>
                    <section class="border-2 border-[#E3E3E3] rounded-xl my-4 justify-between flex items-center p-3">
                        <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                            <layout>@child </layout>
                            <face>
                                <script
                                    type="text/template">{{ return await RenderInfoCardLounge($data, [##cms.query.lid##])}} </script>
                            </face>
                        </basis>
                    </section>
                    <section>
                        <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                            <layout>@child </layout>
                            <face>
                                <script
                                    type="text/template">{{return await renderLoungeInfo($data , [##cms.query.lid##])}}{{return await renderLoungePassengerInfo($data, [##cms.query.lid##])}}{{return await renderServiceInfoLounge($data , [##cms.query.lid##])}}{{return await renderTransferInfoLounge($data , [##cms.query.lid##])}}{{return await renderEscortInfoLounge($data , [##cms.query.lid##])}} </script>
                            </face>
                        </basis>
                    </section>
                    <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                        <layout>@child </layout>
                        <face>
                            <script
                                type="text/template"><section class="{{return await checkSection($data.pdf_description?.[0]?.note?.text || '')}}"><h2 class="font-bold text-lg my-2 font-danabold" dir="{{return await detectDirection($data.pdf_description?.[0]?.note?.text || '')}}" id="rules-title">{{ return await getLocalizedText(await detectDirection($data.pdf_description?.[0]?.note?.text || ''), "قوانین و مقررات", "Rules", "القوانين واللوائح", [##cms.query.lid##])}} </h2><div class="bg-[#F8F8F8] rounded-xl py-4 px-8 text-justify font-danaregular" dir="{{return await detectDirection($data.pdf_description?.[0]?.note?.text || '')}}">{{ return await renderRulesLounge($data, [##cms.query.lid##])}} </div></section></script>
                        </face>
                    </basis>
                    <basis core="print" datamembername="db.lounge_pdf" run="atclient">
                        <layout>@child </layout>
                        <face>
                            <script
                                type="text/template"><section class="{{return await checkSection($data.note)}}"><h2 class="font-bold text-lg my-2 font-danabold" dir="{{return await detectDirection($data.note)}}" id="note-title">{{ return await getLocalizedText(await detectDirection($data.note), "یادداشت", "Note", "ملاحظة", [##cms.query.lid##])}} </h2><div class="bg-[#F8F8F8] rounded-xl py-4 px-8 text-justify font-danaregular" dir="{{return await detectDirection($data.note)}}">{{ return await fixRTLTextCompletely($data.note)}} </div></section></script>
                        </face>
                    </basis>
            </main>
            <footer id="pdf-footer" class=" footer h-[80px] print:w-[595pt] print:h-[100pt] mx-auto "><img
                    class="block mx-auto h-[80px] print:w-[595pt] print:h-[100pt] w-auto object-contain"
                    src="[##cms.cms.cdn##]/images/Footer-contract-pdf.jpg" width="794" height="100"
                    alt="Footer-contract-pdf" />
            </footer>
    </div>
    </basis>

    <basis core="call" lid="2" file="Client_BasisCore_Script.inc"></basis>
    <script src="[##cms.cms.cdn##]/js/pdf-content.functions.js" defer></script>
    <script src="[##cms.cms.cdn##]/js/pdf-lounge.functions.js" defer></script>
</body>
</html>